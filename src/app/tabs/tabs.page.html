
<ion-card-content *ngIf="ui.isipad" 
style="z-index:100;position:fixed;width:100%;padding-inline-start:20px;padding-top:30px;">
  <ion-buttons *ngIf="false" style="display:flex;justify-content:center;width:25px;height:25px;float:left;">
    <ion-menu-toggle>
      <ion-icon name="menu-outline" color="primary" size="large"></ion-icon>
    </ion-menu-toggle>
  </ion-buttons>
</ion-card-content>
<ion-menu type="reveal" content-id="main-content" [disabled]="true"><!--[disabled]="ui.isiphone"-->
  <ion-header [translucent]="true">
    <ion-toolbar>
      <ion-title>{{ ui.instant('Title.App') }}<!--名诗佳句--></ion-title>
    </ion-toolbar>
  </ion-header>
  <ion-content class="ion-padding">
    <ion-header collapse="condense">
      <ion-toolbar>
        <ion-label style="font-size:20px;margin-left:0px;">{{ ui.instant('Title.App') }}<!--名诗佳句--></ion-label>
      </ion-toolbar>
    </ion-header>
    <ion-list>
      <ion-item lines="none" (click)="goTab(1)" class="menu-item" color="primary" *ngIf="isSelected(1)">
        <ion-icon name="play-circle" class="menu-icon"></ion-icon>
        <ion-label class="menu-text">{{ ui.instant('Tabs.ListenNow') }}<!--现在就听--></ion-label>
      </ion-item>
      <ion-item lines="none" (click)="goTab(1)" class="menu-item" *ngIf="!isSelected(1)">
        <ion-icon name="play-circle" class="menu-icon" color="primary"></ion-icon>
        <ion-label class="menu-text">{{ ui.instant('Tabs.ListenNow') }}<!--现在就听--></ion-label>
      </ion-item>
      <ion-item lines="none" (click)="goTab(2)" class="menu-item" color="primary" *ngIf="isSelected(2)">
        <ion-icon name="radio-outline" class="menu-icon"></ion-icon>
        <ion-label class="menu-text">{{ ui.instant('Tabs.Browse') }}<!--浏览--></ion-label>
      </ion-item>
      <ion-item lines="none" (click)="goTab(2)" class="menu-item" *ngIf="!isSelected(2)">
        <ion-icon name="radio-outline" class="menu-icon" color="primary"></ion-icon>
        <ion-label class="menu-text">{{ ui.instant('Tabs.Browse') }}<!--浏览--></ion-label>
      </ion-item>
      <ion-item lines="none" (click)="goTab(4)" class="menu-item" color="primary" *ngIf="isSelected(4)">
        <ion-icon name="search-outline" class="menu-icon"></ion-icon>
        <ion-label class="menu-text">{{ ui.instant('Tabs.Search') }}<!--搜索--></ion-label>
      </ion-item>
      <ion-item lines="none" (click)="goTab(4)" class="menu-item" *ngIf="!isSelected(4)">
        <ion-icon name="search-outline" class="menu-icon" color="primary" *ngIf="!isSelected(4)"></ion-icon>
        <ion-label class="menu-text">{{ ui.instant('Tabs.Search') }}<!--搜索--></ion-label>
      </ion-item>
    </ion-list>

    <ion-accordion-group [multiple]="true" [value]="['first']">
      <ion-accordion value="first">
        <ion-item slot="header" color="translucent" style="--padding-start:5px;">
          <ion-label style="font-size:20px;margin-left:0px;">
            {{ ui.instant('Tabs.Library') }}<!--诗词库-->
          </ion-label>
        </ion-item>
        <div class="ion-no-padding" slot="content">
          <ion-item lines="none" (click)="goSub(0)" class="menu-item" color="primary" *ngIf="isSubSelected(0)">
            <ion-icon name="list-outline" class="menu-icon"></ion-icon>
            <ion-label class="menu-text">{{ ui.instant('Lib.Poemlists') }}<!--诗单列表--></ion-label>
          </ion-item>
          <ion-item lines="none" (click)="goSub(0)" class="menu-item" *ngIf="!isSubSelected(0)">
            <ion-icon name="list-outline" class="menu-icon" color="primary"></ion-icon>
            <ion-label class="menu-text">{{ ui.instant('Lib.Poemlists') }}<!--诗单列表--></ion-label>
          </ion-item>
          <ion-item lines="none" (click)="goSub(2)" class="menu-item" color="primary" *ngIf="isSubSelected(2)">
            <ion-icon name="people-outline" class="menu-icon"></ion-icon>
            <ion-label class="menu-text">{{ ui.instant('Lib.Poets') }}<!--诗人--></ion-label>
          </ion-item>
          <ion-item lines="none" (click)="goSub(2)" class="menu-item" *ngIf="!isSubSelected(2)">
            <ion-icon name="people-outline" class="menu-icon" color="primary"></ion-icon>
            <ion-label class="menu-text">{{ ui.instant('Lib.Poets') }}<!--诗人--></ion-label>
          </ion-item>
          <ion-item lines="none" (click)="goSub(1)" class="menu-item" color="primary" *ngIf="isSubSelected(1)">
            <ion-icon name="cube-outline" class="menu-icon"></ion-icon>
            <ion-label class="menu-text">{{ ui.instant('Lib.Albums') }}<!--专辑--></ion-label>
          </ion-item>
          <ion-item lines="none" (click)="goSub(1)" class="menu-item" *ngIf="!isSubSelected(1)">
            <ion-icon name="cube-outline" class="menu-icon" color="primary"></ion-icon>
            <ion-label class="menu-text">{{ ui.instant('Lib.Albums') }}<!--专辑--></ion-label>
          </ion-item>
          <ion-item lines="none" (click)="goSub(3)" class="menu-item" color="primary" *ngIf="isSubSelected(3)">
            <ion-icon name="pencil-outline" class="menu-icon"></ion-icon>
            <ion-label class="menu-text">{{ ui.instant('Lib.Poems') }}<!--诗词--></ion-label>
          </ion-item>
          <ion-item lines="none" (click)="goSub(3)" class="menu-item" *ngIf="!isSubSelected(3)">
            <ion-icon name="pencil-outline" class="menu-icon" color="primary"></ion-icon>
            <ion-label class="menu-text">{{ ui.instant('Lib.Poems') }}<!--诗词--></ion-label>
          </ion-item>
          <ion-item lines="none" (click)="goSub(4)" class="menu-item" color="primary" *ngIf="isSubSelected(4)">
            <ion-icon name="layers-outline" class="menu-icon"></ion-icon>
            <ion-label class="menu-text">{{ ui.instant('Lib.Topics') }}<!--主题--></ion-label>
          </ion-item>
          <ion-item lines="none" (click)="goSub(4)" class="menu-item" *ngIf="!isSubSelected(4)">
            <ion-icon name="layers-outline" class="menu-icon" color="primary"></ion-icon>
            <ion-label class="menu-text">{{ ui.instant('Lib.Topics') }}<!--主题--></ion-label>
          </ion-item>
          <ion-item lines="none" (click)="goSub(5)" class="menu-item" color="primary" *ngIf="isSubSelected(5)">
            <ion-icon name="star" class="menu-icon"></ion-icon>
            <ion-label class="menu-text">{{ ui.instant('Lib.Articles') }}<!--文章--></ion-label>
          </ion-item>
          <ion-item lines="none" (click)="goSub(5)" class="menu-item" *ngIf="!isSubSelected(5)">
            <ion-icon name="star" class="menu-icon" color="primary"></ion-icon>
            <ion-label class="menu-text">{{ ui.instant('Lib.Articles') }}<!--文章--></ion-label>
          </ion-item>
        </div>
      </ion-accordion>
      <!--
      <ion-accordion value="second">
        <ion-item slot="header" color="translucent" style="--padding-start:5px;">
          <ion-label style="font-size:20px;margin-left:0px;">诗单</ion-label>
        </ion-item>
        <div class="ion-no-padding" slot="content">
          <ion-item lines="none" (click)="goTab(1)" class="menu-item" color="primary" *ngIf="isSelected(1)">
            <ion-icon name="book-outline" class="menu-icon"></ion-icon>
            <ion-label class="menu-text">开卷有益</ion-label>
          </ion-item>
          <ion-item lines="none" (click)="goTab(1)" class="menu-item" *ngIf="!isSelected(1)">
            <ion-icon name="book-outline" class="menu-icon" color="primary"></ion-icon>
            <ion-label class="menu-text">开卷有益</ion-label>
          </ion-item>
          <ion-item lines="none" (click)="goTab(2)" class="menu-item" color="primary" *ngIf="isSelected(2)">
            <ion-icon name="play-circle" class="menu-icon"></ion-icon>
            <ion-label class="menu-text">现在就听</ion-label>
          </ion-item>
          <ion-item lines="none" (click)="goTab(2)" class="menu-item" *ngIf="!isSelected(2)">
            <ion-icon name="play-circle" class="menu-icon" color="primary"></ion-icon>
            <ion-label class="menu-text">现在就听</ion-label>
          </ion-item>
          <ion-item lines="none" (click)="goTab(4)" class="menu-item" color="primary" *ngIf="isSelected(4)">
            <ion-icon name="search-outline" class="menu-icon"></ion-icon>
            <ion-label class="menu-text">搜索</ion-label>
          </ion-item>
          <ion-item lines="none" (click)="goTab(4)" class="menu-item" *ngIf="!isSelected(4)">
            <ion-icon name="search-outline" class="menu-icon" color="primary" *ngIf="!isSelected(4)"></ion-icon>
            <ion-label class="menu-text">搜索</ion-label>
          </ion-item>
        </div>
      </ion-accordion>
      -->
    </ion-accordion-group>
  </ion-content>
</ion-menu>

<ion-tabs id="main-content" (ionTabsDidChange)="onTabChange($event)">
  <div class="music-tab-bar" style="display: flex;flex-direction: column;">
    <!--<ion-toolbar style="--background:rgba(var(--ion-background-color-rgb,255,255,255),0.8);-webkit-backdrop-filter:saturate(210%) blur(20px);backdrop-filter:saturate(210%) blur(20px);">-->
    <ion-toolbar style="--background:rgba(255,255,255,0.8);padding-top:5px;padding-bottom:3px;" *ngIf="data.currentPoem">
      <ion-item lines="none" style="margin:0 0px 0 5px;--padding-start:0;margin-left:15px;--background:transparent;">
        <div (click)="data.play()">
          <ion-thumbnail slot="start"
            style="width:56px;height:56px;display: flex;justify-content: center;align-items: center;margin-right:15px;">
              <img id="authorimg" style="border-radius: 10px;" 
                defaultImage="assets/img/default.jpg" 
                src="{{'https://reddah.blob.core.windows.net/msjj'+(data.currentPoem.image?'img/'+data.currentPoem.image:'poet/'+data.currentPoem.author+'.jpeg')}}"
                onerror="javascript:this.src='assets/img/default.jpg'"
                [ngStyle]="{'opacity':(data.currentPoem&&data.isPlaying) ? '0.5' : '1' }" />
              <div class="playing" style="position: fixed;" *ngIf="data.isPlaying"
                [ngStyle]="{'animation-duration':(data.isPlaying) ? '1s' : '1000s',
                'height':(data.isPlaying) ? '' : '5px' }"
              ></div>
            </ion-thumbnail>
        </div>
        <ion-label (click)="data.play()">
          <div style="display: flex; align-items: center;">
            <ion-icon name="headset" *ngIf="data.currentPoem.audio" color="primary" style="margin-right:5px;min-width: 16px;"></ion-icon>
            <h2 [style.fontSize]="data.zoom(17)" class="show-only-one-line">
              {{data.currentPoem.title}} {{data.currentPoem.author}}
            </h2>
          </div>
          <div class="marquee-container" *ngIf="false">
            <div class="marquee-content">
              {{data.currentPoem.sample?data.currentPoem.sample:data.currentPoem.paragraphs[0]}}
            </div>
          </div>
        </ion-label>
        <ion-buttons slot="end" *ngIf="data.currentPoem.audio" style="margin-right:5px;">
          <ion-button (click)="data.togglePlay()" style="margin-right:10px;font-size:x-large">
            <ion-icon name="play" style="color:black;" *ngIf="!data.isPlaying"></ion-icon>
            <ion-icon name="pause" style="color:black;" *ngIf="data.isPlaying" ></ion-icon>
          </ion-button>
          <ion-button [disabled]="false" (click)="data.playNext()" style="font-size:x-large">
            <ion-icon name="play-forward" style="color:black;"></ion-icon>
          </ion-button>
        </ion-buttons>
      </ion-item>
    </ion-toolbar>

    <ion-tab-bar *ngIf="!ui.isipad" slot="bottom" [translucent]="false" style="padding-top:3px;"
    [ngStyle]="{
      'padding-bottom':ui.isAndroid ? '10px' : '25px',
      'background': ui.isAndroid ? '#fff' : ''
     }"
    >
      <ion-tab-button tab="tab1" style="--background: transparent;"
      (click)="onDblClick()">
        <ion-icon name="play-circle">
        </ion-icon>
        {{ ui.instant('Tabs.ListenNow') }}<!--现在就听-->
      </ion-tab-button>
      <ion-tab-button tab="tab2" style="--background: transparent;"
       [class.active]="true"
      (click)="onDblClick()">
        <ion-icon name="radio-outline"></ion-icon>
        {{ ui.instant('Tabs.Browse') }}<!--浏览-->
      </ion-tab-button>
      <ion-tab-button tab="tab3" style="--background: transparent;"
      (click)="onDblClick()">
        <ion-icon name="albums-outline"></ion-icon>
        {{ ui.instant('Tabs.Library') }}<!--诗词库-->
      </ion-tab-button>
      <ion-tab-button tab="tab4" style="--background: transparent;"
      (click)="tab4Click();onDblClick()">
        <ion-icon name="search-outline"></ion-icon>
        {{ ui.instant('Tabs.Search') }}<!--搜索-->
      </ion-tab-button>
    </ion-tab-bar>



    <ion-tab-bar *ngIf="ui.isipad" slot="bottom" [translucent]="false" 
    style="padding-top:15px;"
      [ngStyle]="{
        'padding-bottom':ui.isAndroid ? '10px' : '25px',
        'background': ui.isAndroid ? '#fff' : ''
      }"
      >
      <ion-tab-button tab="tab1" style="--background: transparent;"
      (click)="onDblClick()">
        <ion-label>
          <div style="display: flex; align-items: center;">
            <ion-icon name="play-circle"
              style="width:35px;height:35px;margin-right:10px;"></ion-icon>
            <h2 [style.fontSize]="data.zoom(17)">
              {{ ui.instant('Tabs.ListenNow') }}<!--现在就听-->
            </h2>
          </div>
        </ion-label>
      </ion-tab-button>
      <ion-tab-button tab="tab2" style="--background: transparent;"
       [class.active]="true"
      (click)="onDblClick()">
        <ion-label>
          <div style="display: flex; align-items: center;">
            <ion-icon name="radio-outline"
              style="width:35px;height:35px;margin-right:10px;"></ion-icon>
            <h2 [style.fontSize]="data.zoom(17)">
              {{ ui.instant('Tabs.Browse') }}<!--浏览-->
            </h2>
          </div>
        </ion-label>
      </ion-tab-button>
      <ion-tab-button tab="tab3" style="--background: transparent;"
      (click)="onDblClick()">
        <ion-label>
          <div style="display: flex; align-items: center;">
            <ion-icon name="albums-outline"
              style="width:35px;height:35px;margin-right:10px;"></ion-icon>
            <h2 [style.fontSize]="data.zoom(17)">
              {{ ui.instant('Tabs.Library') }}<!--诗词库-->
            </h2>
          </div>
        </ion-label>
      </ion-tab-button>
      <ion-tab-button tab="tab4" style="--background: transparent;"
      (click)="tab4Click();onDblClick()">
        <ion-label>
          <div style="display: flex; align-items: center;">
            <ion-icon name="search-outline"
              style="width:35px;height:35px;margin-right:10px;"></ion-icon>
            <h2 [style.fontSize]="data.zoom(17)">
              {{ ui.instant('Tabs.Search') }}<!--搜索-->
            </h2>
          </div>
        </ion-label>
      </ion-tab-button>
    </ion-tab-bar>
  </div>
</ion-tabs>


