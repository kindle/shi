<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>开卷有益</ion-title>
  </ion-toolbar>
</ion-header>
<ion-content #pageTop [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title class="tab-title" mode="md">开卷有益</ion-title>
    </ion-toolbar>
  </ion-header>

  <!--lazy load image sample -- test code--
  <ion-card [defaultImage]="defaultImage" [lazyLoad]="image">
    <ion-card-content class="station-content" style="z-index:1;" *ngIf="image"
        defaultImage="assets/img/default.jpg" 
        [lazyLoad]="image"
        style="background-size: cover;background-repeat: no-repeat;">
        
        <div style="padding:10px;z-index: 2;margin-top:auto;margin-bottom:0;
        background-image: linear-gradient(rgba(0,0,0,0.1), rgba(0,0,0,0.8));
        ;font-size:13px;width:100%;"
        >hello</div>
      </ion-card-content>
  </ion-card>
  <div [defaultImage]="defaultImage" [lazyLoad]="image" style="border:1px solid red;height:300px;"></div> 
  <img [defaultImage]="defaultImage" [lazyLoad]="image" />-->


  <div style="display: flex;flex-wrap: wrap;justify-content: center;">
    <div class="card-wrap" *ngFor="let item of data.jsonData;index as i">

      <!--text template bak
      <ion-card class="card card-img" card-shrink
      (click)="goToArticle(item)"
      *ngIf="item.template=='text'"
        style="background-image: url('https://reddah.blob.core.windows.net/msjjimg/{{item.bg_image}}');
        background-size:cover;min-height: {{item.min_height}};">
        <ion-card-content [ngClass]="{'title-bottom':item.is_title_bottom}">
          <ion-card-subtitle class="card-text" style="color:{{item.title_color}};font-size:18px;">{{item.small_title}}</ion-card-subtitle>
          <ion-card-title class="card-text" style="color:{{item.title_color}}">
            {{item.big_title.substring(0,25)}}{{item.big_title==item.big_title.substring(0,25)?"":"..."}}
          </ion-card-title>
        </ion-card-content>
      </ion-card>
      -->

      <!--text template-->
      <ion-card class="card card-img" card-shrink
      (click)="goToArticle(item)"
        *ngIf="item.template=='text'"
        defaultImage="" 
        lazyLoad="https://reddah.blob.core.windows.net/msjjimg/{{item.bg_image}}"
        style="
        background-size:cover;min-height: {{item.min_height}};">
        <ion-card-content [ngClass]="{'title-bottom':item.is_title_bottom}">
          <ion-card-subtitle class="card-text" style="color:{{item.title_color}};font-size:18px;">{{item.small_title}}</ion-card-subtitle>
          <ion-card-title class="card-text" style="color:{{item.title_color}}">
            {{item.big_title.substring(0,25)}}{{item.big_title==item.big_title.substring(0,25)?"":"..."}}
          </ion-card-title>
        </ion-card-content>
      </ion-card>
      


      <!--slide template-->
      <ion-card class="card card-img" (click)="goTemplateSlide(item.link)" card-shrink
        *ngIf="item.template=='slide'"
        defaultImage="" 
        lazyLoad="https://reddah.blob.core.windows.net/msjjimg/{{item.bg_image}}"
        style="background-size:cover;min-height: {{item.min_height}};">
        <ion-card-content>
          <ion-card-subtitle class="card-text" style="color:{{item.title_color}};font-size:18px;">{{item.small_title}}</ion-card-subtitle>
          <ion-card-title class="card-text" style="color:{{item.title_color}}">{{item.big_title}}</ion-card-title>
        </ion-card-content>
      </ion-card>




      <!--scroll template-->
      <ion-card class="card card-scroll" id="modal-scroll" card-shrink
      *ngIf="item.template=='scroll'">
        <ion-card-content>
          <ion-card-subtitle class="card-text" style="font-size:18px;">
            {{item.small_title}}
          </ion-card-subtitle>
          <ion-card-title>{{item.big_title}}</ion-card-title>
        </ion-card-content>
      
        <ion-card-content style="margin-top:0;">
          <div class="card-scroll-box">
            <div class="card-scroll-item" *ngFor="let c of item.items" (click)="goAuthorDirect(c.text)">
              <div class="card-image contain" style="background-image:{{c.image}};background-color:{{c.color}}"></div>
              <div class="card-text">{{c.text}}</div>
            </div>
          </div>
        </ion-card-content>
      </ion-card>
      



      <!--vote template-->
<!--[ngClass]="getCardClasses()" (press)="onCardPress()" (pressup)="onCardRelease()"-->
      <ion-card class="card card-vote" id="modal-vote" card-shrink
      *ngIf="item.template=='vote'">
        <div class="card-vote-bg">{{item.small_title}}</div>
        <ion-card-content>
          <ion-card-subtitle style="display: flex;">
            <!--<ion-badge style="padding-left:0;" color="transparent">{{item.small_title}}</ion-badge>-->
            <ion-badge color="danger" style="font-size:18px;">{{item.small_title}}</ion-badge>
          </ion-card-subtitle>
          <ion-card-title style="margin-top:10px;color:black;">{{item.big_title}}</ion-card-title>
          <ion-card-subtitle style="margin-top:10px;font-size: 18px;">{{item.desc}}</ion-card-subtitle>
        </ion-card-content>
        <ion-card-content>
          <ion-item color="light" style="--padding-start:0;margin:10px 0;border-radius: 5px;" lines="none" 
          *ngFor="let v of item.items" (click)="data.playbyid(v.id, v.text)">
            <div style="width: 100%;text-align: center;">{{v.text}}</div>
          </ion-item>
        </ion-card-content>
      </ion-card>



      <!--wall template-->
      <ion-card class="card card-vote" card-shrink
      (click)="goToArticle(item)"
      *ngIf="item.template=='wall'">
        <div class="card-vote-bg">{{item.small_title}}</div>
        <ion-card-content>
          <ion-card-subtitle style="display: flex;">
            <ion-badge color="danger">{{item.small_title}}</ion-badge>
          </ion-card-subtitle>
          <ion-card-title style="margin-top:10px;">{{item.big_title}}</ion-card-title>
        </ion-card-content>
        <!--[autoplay]="autoplayopt" -->
        <ion-card-content>
          <swiper-container #autoswiper
            style="margin-top:0px;margin-bottom: 0px;"
            [autoplay]="autoplayopt"
            [grid]="gridopt"
            slides-Per-View="3.5"
            speed="5000"
            interval="5000"
            duration="5000"
            freeMode="true"
            allow-Touch-Move="false"
            >
            <!--(click)="data.goToAuthor(v)" -->
            <swiper-slide *ngFor="let v of item.items;index as i" class="swiper-slide" 
            [ngStyle]="{'margin-left':(i === data.getInt(item.items.length/3)) ? '40px' : '0px' }">
              <img style="width: 80px;height:80px;border-radius: 10px;" 
                defaultImage="assets/img/default.jpg" 
                lazyLoad="https://reddah.blob.core.windows.net/msjjpoet/{{v.author}}.jpeg"   
                onerror="javascript:this.src='assets/img/default.jpg'"
              />
              <div style="text-align: center;width: 80px;margin-bottom:5px;background-color: rgb(247,247,247);">{{v.author}}</div>
            </swiper-slide>
          </swiper-container>
        </ion-card-content>
      </ion-card>






      <!--group template-->
      <ion-card class="card card-img" card-shrink
      (click)="goToArticle(item)"
      *ngIf="item.template=='group'"
        defaultImage="" 
        lazyLoad="https://reddah.blob.core.windows.net/msjjimg/{{item.bg_image}}"
        style="background-size:cover;min-height: {{item.min_height}};">
        <ion-card-content [ngClass]="{'title-bottom':item.is_title_bottom}">
          <ion-card-subtitle class="card-text" style="color:{{item.title_color}};font-size:18px;">{{item.small_title}}</ion-card-subtitle>
          <ion-card-title class="card-text" style="color:{{item.title_color}}">{{item.big_title}}</ion-card-title>
        </ion-card-content>
        <ion-card-content style="bottom:0;position: absolute;width: 100%; background-color: white;padding-bottom: 20px;"
        (click)="stopBubble($event)">
          <swiper-container #autoswiper
            style="margin-top:0px;margin-bottom: 0px;"
            autoplay="true"
            [grid]="gridopt1"
            slides-Per-View="4"
            speed="5000"
            interval="5000"
            duration="5000"
            freeMode="true"
            allow-Touch-Move="false"
            >
            <swiper-slide *ngFor="let v of item.items;index as i" class="swiper-slide"
            (click)="data.goToAuthor(v.author)"
            >
              <img style="width: 65px;height:65px;border-radius: 10px;border:1px solid lightgoldenrodyellow;" 
                defaultImage="assets/img/default.jpg" 
                lazyLoad="https://reddah.blob.core.windows.net/msjjpoet/{{v.author}}.jpeg"  
                onerror="javascript:this.src='assets/img/default.jpg'"
              />
              <div style="text-align: center;width: 65px;background-color: rgb(247,247,247);">{{v.author}}</div>
            </swiper-slide>
          </swiper-container>
        </ion-card-content>
      </ion-card>




      <!--git template-->
      <ion-card class="card card-gif" id="modal-gif{{i}}" card-shrink
      *ngIf="item.template=='gif'">
        <ion-card-content>
          <ion-card-subtitle>{{item.small_title}}</ion-card-subtitle>
          <ion-card-title>{{item.big_title}}</ion-card-title>
        </ion-card-content>
        <ion-modal trigger="modal-gif{{i}}" #modal [initialBreakpoint]="1" [breakpoints]="[0, 1]">
          <ng-template>
            <ion-content force-overscroll="false">
              <div class="card card-gif">
                <ion-card-content style="z-index:1;position:fixed;width:100%;">
                  <ion-buttons style="display:flex;justify-content:center;width:35px;height:35px;float:right;background-color:rgba(207,207,296,0.5);border-radius: 50%;" (click)="closeModal(i)">
                    <ion-button color="light">
                      <ion-icon name="close-outline"></ion-icon>
                    </ion-button>
                  </ion-buttons>
                </ion-card-content>
                <ion-card-content>
                  <ion-card-subtitle>{{item.small_title}}</ion-card-subtitle>
                  <ion-card-title>{{item.big_title}}</ion-card-title>
                </ion-card-content>
                <ion-card-content>
                </ion-card-content>
              </div>
              <div style="padding:10px;">
                {{item.desc}}
                
              </div>
            </ion-content>
          </ng-template>
        </ion-modal>
      </ion-card>
      
    </div>
  </div>
  


  <div class="placeholder-playbox"></div>

</ion-content>